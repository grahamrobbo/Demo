sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/Log","sap/base/util/UriParameters"],(function(e,t,r,a){var o,n="sap/ui/core/sample/RoutingNestedComponent/";return{init:function(i){var s=i||{};return new Promise((function(i,u){var p=sap.ui.require.toUrl(n+"manifest.json"),c=new t(p);c.attachRequestCompleted((function(){var t=new a(window.location.href),u=sap.ui.require.toUrl("sap/ui/core/sample/RoutingNestedComponent/localService/mockdata"),p=c.getProperty("/sap.app/dataSources/mainService"),d=sap.ui.require.toUrl(n+p.settings.localUri),l=/.*\/$/.test(p.uri)?p.uri:p.uri+"/";o?o.stop():o=new e({rootUri:l}),e.config({autoRespond:!0,autoRespondAfter:s.delay||t.get("serverDelay")||500}),o.simulate(d,{sMockdataBaseUrl:u,bGenerateMissingMockData:!0});var f=o.getRequests(),m=function(e,t,r){r.response=function(r){r.respond(e,{"Content-Type":"text/plain;charset=utf-8"},t)}};(s.metadataError||t.get("metadataError"))&&f.forEach((function(e){e.path.toString().indexOf("$metadata")>-1&&m(500,"metadata Error",e)}));var g=s.errorType||t.get("errorType"),v="badRequest"===g?400:500;g&&f.forEach((function(e){m(v,g,e)})),o.setRequests(f),o.start(),r.info("Running the app with mock data"),i()})),c.attachRequestFailed((function(){var e="Failed to load application manifest";r.error(e),u(new Error(e))}))}))},getMockServer:function(){return o}}}));